### 1.通用说明

- 接口的输入和输出，使用 UTF-8 编码
- 接口返回以 json 格式输出
- 接口在正常状态下，HTTP 返回码均为 200（不同于业务返回码 code）
- 所有接口采用 https 协议

### 2. 请求说明

- 用户处于已登录状态时，所有请求需要带入 token（通过头部 `Authorization` 字段）
- 认证方式采用 `Web JSON Token`, 根据规范，携带的 Header 应该是 `Authorization: Bearer 你的身份令牌`
- 请求数据格式为： `application/json`
- 需要使用输入交易密码时，请求头部需要加上 `X-Pay-Password` 字段指定交易密码
- 在一些需要签名的接口，需要先请求签名接口`[POST] /v1/signature`, 然后把得到的 hash 值放在请求头 `X-Signature`

**通用的查询参数**:

- limit:
  - 查询多少条数据，默认 `10`
- page:
  - 查询第 n 页数据，默认 `0`
- sort:
  - 按字段排序，默认 `-created_at`, 按照创建时间排序. 支持多字段排序，例如 `+created_at,-balance`. `+`代表正序排序，`-`代表倒序排序。多字段以`,`进行分割
- platform:
  - 指定平台(预留字段)

### 3. 返回说明

返回数据的统一结构如下：

```json
{
  "message": "",
  "data": [],
  "status": 1,
  "meta": {
    "limit": 10,
    "page": 0,
    "total": 100,
    "num": 10,
    "sort": "",
    "platform": ""
  }
}
```

- message:
  - 接口返回的信息
- data:
  - 接口返回的数据
  - 这个数据可以是任意类型，`null`/`string`/`bool`/`object`...等
- status:
  - 状态码，非 1 状态码则为错误
- meta:
  - 当查询列表时，才会返回这个字段
  - limit:
    - 查询多少条数据
    - 默认 10
  - page:
    - 查询第 n 页数据，从 0 开始
    - 默认 0
  - total:
    - 存在的数据总量
  - num:
    - 当前返回的数据条数
  - sort:
    - 当前筛选的排序条件
  - platform:
    - 通过指定平台查询(预留字段)

### 错误状态码

接口返回的 `status` 字段表示错误状态码。当 `status = 1` 时表示没有错误，执行成功。

以下是各错误下的状态码

| 状态码 | 说明                                                       |
| ------ | ---------------------------------------------------------- |
| -1     | 系统维护中                                                 |
| 0      | 未知错误                                                   |
| 100000 | 参数错误                                                   |
| 100001 | 找不到数据                                                 |
| 100002 | 没有权限                                                   |
| 100003 | 数据签名不正确                                             |
| 100004 | 格式不正确                                                 |
| 100005 | 无效的邀请码                                               |
| 101000 | 发送短信失败                                               |
| 101001 | 发送邮件失败                                               |
| 200000 | 用户不存在                                                 |
| 200001 | 用户已存在                                                 |
| 200002 | 用户已激活                                                 |
| 200003 | 用户未激活                                                 |
| 200004 | 帐号已被禁用                                               |
| 200005 | 新密码和旧密码不能相同                                     |
| 200006 | 账号或密码错误                                             |
| 200007 | 重置码错误或已失效                                         |
| 200008 | 需要先设置交易密码                                         |
| 200009 | 交易密码已设置                                             |
| 200010 | 两次输入密码不一致                                         |
| 200011 | 旧密码错误                                                 |
| 200012 | 密码错误                                                   |
| 200013 | 请输入密码                                                 |
| 200014 | 请输入交易密码                                             |
| 200015 | 帐号重复绑定(通常是绑定的邮箱/手机号/微信号等，已被绑定了) |
| 200016 | 无法重命名用户名                                           |
| 999999 | 无效的 token 或已过期                                      |
